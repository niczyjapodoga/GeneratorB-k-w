<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Kansino Offline 🎰</title>
  <style>
    /* Twój styl bez zmian */
    @import url('https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap');

    body {
      margin: 0; padding: 0;
      background: radial-gradient(circle, #111, #222);
      color: #fff;
      font-family: 'Luckiest Guy', cursive;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    h1 {
      font-size: 4rem;
      margin: 20px 0;
      color: #ffd700;
      text-shadow: 0 0 10px #ff0000;
    }

    .slot-machine {
      display: flex;
      align-items: center;
      background: #333;
      border: 10px solid #555;
      border-radius: 20px;
      padding: 20px;
      position: relative;
    }

    .reels {
      display: flex;
      gap: 20px;
    }

    .reel {
      width: 120px;
      height: 120px;
      background: #000;
      border: 5px solid #999;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    .reel img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 5px;
      user-select: none;
    }

    .lever {
      width: 20px;
      height: 150px;
      background: #ff0000;
      border: 3px solid #fff;
      border-radius: 10px;
      position: absolute;
      right: -40px;
      top: 30px;
      cursor: pointer;
      transform-origin: top center;
      transition: transform 0.3s ease;
      user-select: none;
    }

    .lever:active {
      transform: rotate(50deg);
    }

    .message {
      font-size: 3rem;
      margin: 30px;
      color: #ff0;
      text-shadow: 0 0 15px #f00;
      display: none;
      user-select: none;
    }

    .laughing-face {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 100px;
      height: 100px;
    }

    .laughing-face img {
      width: 100%;
      border-radius: 50%;
      box-shadow: 0 0 20px #f00;
    }

    button {
      padding: 10px 20px;
      background: #ff4081;
      border: none;
      border-radius: 30px;
      font-size: 1.5rem;
      color: #fff;
      cursor: pointer;
      margin-top: 20px;
      user-select: none;
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
    }

    /* Budżet i obstawianie */
    #budget {
      margin-top: 10px;
      font-size: 2rem;
      color: #fff;
      user-select: none;
    }

    #bet-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
    }

    #bet-controls button {
      background: #2196f3;
    }

    #wife-bet {
      margin-top: 20px;
      font-size: 1.8rem;
      color: #f33;
      cursor: pointer;
      user-select: none;
      display: none;
    }
    #wife-bet:hover {
      text-decoration: underline;
    }

    /* Sigma Win animacja */
    .sigma-win {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 5rem;
      color: #00ff00;
      text-shadow: 0 0 20px #0f0;
      animation: sigma-flash 1s infinite alternate;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .sigma-win img {
      width: 200px;
      margin-top: 10px;
      animation: sigma-img-spin 2s linear infinite;
    }
    @keyframes sigma-flash {
      0% { color: #00ff00; }
      100% { color: #007700; }
    }
    @keyframes sigma-img-spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }

    /* Nonszalant Win animacja */
    .nonszalant-win {
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 4rem;
      color: #ff69b4;
      text-shadow: 0 0 15px #ff1493;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: nonsz-flash 1.5s infinite alternate;
    }
    .nonszalant-win img {
      width: 180px;
      margin-top: 10px;
      animation: nonsz-img-bounce 1.5s infinite;
    }
    @keyframes nonsz-flash {
      0% { color: #ff69b4; }
      100% { color: #ff1493; }
    }
    @keyframes nonsz-img-bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
  </style>
</head>
<body>

  <h1>KANSINO OFFLINE 🎰 - PRO</h1>

  <div class="slot-machine">
    <div class="reels">
      <div class="reel"><img src="chatgpt.png" alt="slot1" /></div>
      <div class="reel"><img src="chomikchinczyk.jpg" alt="slot2" /></div>
      <div class="reel"><img src="chomiczek.png" alt="slot3" /></div>
    </div>
    <div class="lever" onclick="pullLever()"></div>
  </div>

  <div id="budget">Budżet: <span id="budget-amount">500</span> 💰</div>
  <div id="bet-controls">
    <button onclick="changeBet(-10)">-10</button>
    <div>Obstaw: <span id="bet-amount">50</span> 💰</div>
    <button onclick="changeBet(10)">+10</button>
    <button onclick="fullBet()" title="Obstaw wszystko!">FULL BET</button>
  </div>

  <button id="spinButton" onclick="spin()">Kręć!</button>

  <div class="laughing-face">
    <img src="chomiczek.png" alt="hahaha" />
  </div>

  <div class="message" id="message"></div>

  <div id="sigma-win" class="sigma-win" style="display:none;">
    SIGMA WIN! 🎉
    <img src="Zrzut ekranu 2025-05-25 131156.png" alt="sigma win" />
  </div>

  <div id="nonszalant-win" class="nonszalant-win" style="display:none;">
    NONSZALANT WIN! 😎
    <img src="Zrzut ekranu 2025-05-23 200140.png" alt="nonszalant win" />
  </div>

  <div id="wife-bet" onclick="wifeBet()" title="Ostro ryzykuj!">
    OBSTAW SWOJĄ ŻONĘ! (RISK 50% szans na +100💰)
  </div>

<script>
  const images = ["Zrzut ekranu 2025-06-01 164255.png", "chomikchinczyk.jpg", "chomiczek.png", "Zrzut ekranu 2025-05-26 221805.png", "ChatGPT Image 27 kwi 2025, 16_15_08.png"];
  let cooldown = false;
  let budget = 500;
  let bet = 50;
  let wifeBetUsed = false;

  const reelsImgs = document.querySelectorAll('.reel img');
  const message = document.getElementById("message");
  const spinButton = document.getElementById("spinButton");
  const budgetDisplay = document.getElementById("budget-amount");
  const betDisplay = document.getElementById("bet-amount");
  const sigmaWinDiv = document.getElementById("sigma-win");
  const nonszalantWinDiv = document.getElementById("nonszalant-win");
  const wifeBetDiv = document.getElementById("wife-bet");

  function updateBudget() {
    budgetDisplay.textContent = budget;

    // Minimalny bet to 10 jeśli budżet >= 10, inaczej 0
    if(budget < 10){
      bet = 0;
    } else {
      if(bet < 10) bet = 10;
      if(bet > budget) bet = budget;
    }

    betDisplay.textContent = bet;

    if(budget < 10 && !wifeBetUsed){
      wifeBetDiv.style.display = "block";
    } else {
      wifeBetDiv.style.display = "none";
    }

    spinButton.disabled = cooldown || bet > budget || bet < 10;
  }

  function changeBet(amount) {
    if(cooldown) return;

    if(budget < 10){
      bet = 0;
    } else {
      bet += amount;
      if(bet < 10) bet = 10;
      if(bet > budget) bet = budget;
    }
    updateBudget();
  }

  function fullBet() {
    if(cooldown) return;
    if(budget >= 10){
      bet = budget;
    } else {
      bet = 0;
    }
    updateBudget();
  }

  function pullLever() {
    if(cooldown) return;
    const lever = document.querySelector('.lever');
    lever.style.transform = 'rotate(50deg)';
    setTimeout(() => {
      lever.style.transform = 'rotate(0deg)';
    }, 300);
  }

  async function spin() {
    if(cooldown || bet > budget || bet < 10) return;
    cooldown = true;
    spinButton.disabled = true;
    wifeBetDiv.style.pointerEvents = "none";
    message.style.display = "none";

    budget -= bet;
    updateBudget();

    pullLever();

    const spinDuration = [1500, 2500, 3500];
    const spinInterval = 100;
    let intervals = [];

    for(let i=0; i<3; i++) {
      let elapsed = 0;
      intervals[i] = setInterval(() => {
        reelsImgs[i].src = images[Math.floor(Math.random()*images.length)];
      }, spinInterval);
    }

    await new Promise(r => setTimeout(r, spinDuration[0]));
    clearInterval(intervals[0]);
    reelsImgs[0].src = images[Math.floor(Math.random()*images.length)];
    await new Promise(r => setTimeout(r, spinDuration[1]-spinDuration[0]));
    clearInterval(intervals[1]);
    reelsImgs[1].src = images[Math.floor(Math.random()*images.length)];
    await new Promise(r => setTimeout(r, spinDuration[2]-spinDuration[1]));
    clearInterval(intervals[2]);
    reelsImgs[2].src = images[Math.floor(Math.random()*images.length)];

    checkWin();
    cooldown = false;
    updateBudget();
  }

  function checkWin() {
    // Sprawdzamy czy 3 obrazki takie same:
    const srcs = [...reelsImgs].map(img => img.src);
    const lastPart = srcs.map(s => s.substring(s.lastIndexOf('/')+1)); // bierzemy nazwę pliku, by porównać

    if(lastPart[0] === lastPart[1] && lastPart[1] === lastPart[2]){
      // Wygrana

      const winnings = bet * 10;
      budget += winnings;
      updateBudget();

      if(lastPart[0].includes("Zrzut ekranu 2025-05-25 131156.png")){
        showSigmaWin();
      } else {
        showNonszalantWin();
      }
    } else {
      // Przegrana
      message.textContent = "Niestety, spróbuj ponownie...";
      message.style.display = "block";

      if(budget < 10 && !wifeBetUsed){
        wifeBetDiv.style.display = "block";
      }
    }
  }

  function showSigmaWin() {
    sigmaWinDiv.style.display = "flex";
    setTimeout(() => {
      sigmaWinDiv.style.display = "none";
    }, 4000);
  }

  function showNonszalantWin() {
    nonszalantWinDiv.style.display = "flex";
    setTimeout(() => {
      nonszalantWinDiv.style.display = "none";
    }, 4000);
  }

  function wifeBet() {
    if(wifeBetUsed) return;

    wifeBetUsed = true;
    wifeBetDiv.style.display = "none";

    const success = Math.random() < 0.5;
    if(success){
      budget += 100;
      message.textContent = "WYGRANA! +100💰 za ryzyko!";
    } else {
      budget = 0;
      message.textContent = "PRZEGRAŁEŚ wszystko! 😱";
    }
    message.style.display = "block";
    updateBudget();
  }

  updateBudget();
</script>
</body>
</html>
